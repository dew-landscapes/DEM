# Methods

## DEMs

DEMs have been obtained by DEW (for DEW-use only) for a large part of South Australia with resolution of roughly 10 m.

Table \@ref(tab:DEMs) lists the available DEMs.

```{r DEMs}

window |>
  dplyr::distinct(dem_name
                  , type
                  #, file
                  , original_cm
                  , licence
                  ) |>
    kableExtra::kable(caption = paste0("Sample DEMs")
                      , format.args = list(digits = 2)
                      , "html", escape = F
                      ) %>%
    kableExtra::kable_styling(bootstrap_options = c(NA
                                                    , "striped"
                                                    #, "hover"
                                                    #, "condensed"
                                                    #, "responsive"
                                                    )
                              )


```


## Processing

For each DEM, the following processing was applied:

* reprojected into GDA 2020
* masked to the minimum available overlap between all DEMs (in each area)
* aggregated or disaggregated to roughly `r settings$grain$res` m from original resolution
* reprojected into the same `r terra::res(window$base[[1]])[1]` m raster
* generation of derived rasters via:
    + `Qfit` function in the `MultiscaleDTM` package `r envReport::cite_package("MultiscaleDTM")` using `v` argument (window size): `r analysis$window %>% envFunc::vec_to_sentence()` cells
    + `land_class` function in the`envRaster` package `r envReport::cite_package("envRaster")` using `r analysis$sn %>% envFunc::vec_to_sentence()` cells for the small window and `r analysis$ln` cells for the large window as input to the 10 class landscape classification
* all values from the derived rasters used to generate a range of visualisations and summary statistics.
    
The `Qfit` function generates several continuous and one categorical variable for a digital terrain model:

* `r paste0(as.character(formals(MultiscaleDTM::Qfit)$metrics)[-1], collapse = "\n* ")``

A [shiny app](https://ailich.shinyapps.io/Terrain_Attributes_Explorer_App/) is available to investigate the meaning of each of these variables.f

## Workflow

The data import, cleaning, analysis and report writing were done in a scripted workflow using the programs `R` and 'R-studio Desktop'. [`R`](https://www.r-project.org/) [@R-base] is an open source software environment for statistical computing and graphics. Base R can be extended via a range of open source packages to enable specific tasks or analyses. The packages used to produce this report are listed in Table \@ref(tab:packages).

[R-studio Desktop](https://posit.co/download/rstudio-desktop/) is a set of open source tools built to facilitate interaction with `R`.

```{r packages}

  knitr::kable(tibble::tibble(package = yaml::read_yaml("../settings/packages.yaml")$packages) %>%
                 dplyr::mutate(citation = paste0("@R-"
                                                 , package
                                                 )
                               ) %>%
                 dplyr::left_join(tibble::as_tibble(devtools::session_info(include_base = TRUE)$packages)) %>%
                 dplyr::select(package
                               , citation
                               , loadedversion
                               , date
                               , source
                               )
               , caption = "R [@R-base] packages used in the production of this report"
               )

```
