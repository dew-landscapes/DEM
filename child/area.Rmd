
```{r thisOne{{areaID}}}

  areaID <- "{{areaID}}"

```

# `r areaID`

## Continuous

```{r dataCont{{areaID}}}

  cont_area <- cont %>%
    dplyr::filter(aoi_name == areaID)

  terr <- window |>
    dplyr::filter(aoi_name == areaID) |>
    dplyr::pull(l) %>%
    `[[`(1)

```

```{r cont_metric_rmd{{areaID}}}

  cont_metric_rmd <- NULL

  # this loops through cont_metric.Rmd, generating the results for each report card

  for (i in unique(cont_area$metric)) {
    
    cont_metricID <- i
    
    cont_metric_rmd <- c(cont_metric_rmd
                     , knit_expand(fs::path(here::here()
                                            , "child"
                                            , "cont_metric.Rmd"
                                            )
                                   )
                     )
    
  }

```

`r paste(knit(text = cont_metric_rmd), collapse = '\n')`

## Categorical

Table \@ref(tab:categTab{{areaID}}) shows the proportion of each DEM classifed to each landform element (also see Figure \@ref(fig:categCount{{areaID}}).

Figure \@ref(fig:categ{{areaID}}) shows a landscape classification for each reprojected sample area and window size.

```{r categTab{{areaID}}}

  categ_area <- categ %>%
    dplyr::filter(aoi_name == areaID)

  categ_area %>%
    dplyr::select(dem_name
                  , category
                  , prop
                  ) %>%
    tidyr::pivot_wider(names_from = dem_name, values_from = prop) %>%
    dplyr::select(category, !!rlang::ensym(reference), everything()) |>
    kableExtra::kable(caption = paste0("Proportion of "
                                       , areaID
                                       , " area classified to each landform element"
                                       )
                      , format.args = list(digits = 2)
                      ) %>%
    kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))


```

<br>

```{r categ{{areaID}}, fig.height = 10, fig.cap = paste0("Categorical representation of the ", areaID, " sample")}

  terra::plot(terr)

```

```{r categCount{{areaID}}, fig.cap = paste0("Proportion of categorised ", areaID, " sample aoi_name in each of several classification classes")}

  ggplot(categ_area %>%
           dplyr::filter(aoi_name == areaID) |>
           dplyr::mutate(dem_name = forcats::fct_relevel(dem_name, reference))
         , aes(category, prop, fill = dem_name)
         ) +
    geom_col(position = "dodge") +
    #facet_grid(~ window) +
    coord_flip() +
    scale_fill_viridis_d() +
    guides(fill = guide_legend(reverse = TRUE))

```
